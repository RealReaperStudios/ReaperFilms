<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Reaper Studios - Project Gallery</title>
    <link rel="stylesheet" href="style.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <style>
        .gallery-navbar {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: rgba(5, 5, 7, 0.95);
            border-bottom: 1px solid var(--primary-color);
            overflow-x: auto;
        }
        .gallery-nav-icon {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.3s ease;
        }
        .gallery-nav-icon:hover,
        .gallery-nav-icon.active {
            border-color: var(--primary-color);
            box-shadow: var(--neon-shadow);
        }
        .gallery-content {
            padding: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin-top: 70px; /* To avoid being cut off by fixed navbar */
        }
        .gallery-image {
            max-width: 300px;
            border-radius: 8px;
            box-shadow: var(--neon-shadow);
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .gallery-image:hover {
            transform: scale(1.05);
        }
        .back-button {
            margin: 1rem 2rem;
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            cursor: pointer;
            border-radius: 4px;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }
        .back-button:hover {
            background-color: var(--primary-color);
            color: var(--text-color);
        }
    </style>

    <style>
        /* Modal floating window */
        .modal-window {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--darker-bg);
            border-radius: 15px;
            box-shadow: 0 0 30px var(--primary-glow);
            z-index: 3000;
            max-width: 90vw;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem;
        }

        .modal-window img {
            max-width: 100%;
            max-height: 80vh;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .modal-controls {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }

        .modal-button {
            background: var(--primary-color);
            border: none;
            color: var(--text-color);
            padding: 0.5rem 1rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .modal-button:hover {
            background: var(--accent-color);
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo-container">
            <div class="logo-icon">
                <img src="images/430c89831e92b2c732c276c7d799eda7.webp" alt="Reaper Studios Logo" style="width: 50px; height: 50px; object-fit: contain;">
            </div>
            <div class="logo">Reaper Studios</div>
        </div>
        <div id="gallery-navbar" class="gallery-navbar">
            <!-- Project icons for navigation will be dynamically loaded here -->
        </div>
    </nav>

    <!-- Gallery Content -->
    <main>
        <section id="gallery-content" class="gallery-content">
            <!-- Gallery images will be dynamically loaded here -->
        </section>
        <button id="back-to-portfolio" class="back-button">Back to Portfolio</button>
    </main>

    <script>
        // Utility to get URL query parameters
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Inline projects data
        const projects = [
            {
                "id": "haunted-roots",
                "title": "Haunted Roots",
                "description": "A chilling tale of ancestral spirits and dark secrets.",
                "displayImage": "https://via.placeholder.com/300x250/333/fff?text=Haunted+Roots"
            },
            {
                "id": "shadows-of-the-abyss",
                "title": "Shadows of the Abyss",
                "description": "Dive into the depths of despair and madness.",
                "displayImage": "https://via.placeholder.com/300x250/333/fff?text=Shadows+of+the+Abyss"
            },
            {
                "id": "echoes-of-the-damned",
                "title": "Echoes of the Damned",
                "description": "Whispers from the other side haunt the living.",
                "displayImage": "https://via.placeholder.com/300x250/333/fff?text=Echoes+of+the+Damned"
            },
            {
                "id": "reapers-harvest",
                "title": "Reaper's Harvest",
                "description": "The grim reaper collects his due in this horror anthology.",
                "displayImage": "https://via.placeholder.com/300x250/333/fff?text=Reaper%27s+Harvest"
            }
        ];

        // Load projects and render gallery navbar
        function loadProjects() {
            const galleryNavbar = document.getElementById('gallery-navbar');
            galleryNavbar.innerHTML = '';

            projects.forEach(project => {
                const navIcon = document.createElement('img');
                navIcon.src = project.displayImage;
                navIcon.alt = project.title;
                navIcon.className = 'gallery-nav-icon';
                navIcon.title = project.title;
                navIcon.dataset.projectId = project.id;
                navIcon.addEventListener('click', () => {
                    if (project.id !== currentProjectId) {
                        window.location.href = `project.html?id=${project.id}`;
                    }
                });
                galleryNavbar.appendChild(navIcon);
            });
        }

        // Load gallery images for current project
        function loadGallery(projectId) {
            const galleryContent = document.getElementById('gallery-content');
            galleryContent.innerHTML = '';

            // Inline project images data
            const projectImages = {
                'haunted-roots': [
                    'https://via.placeholder.com/400x300/333/fff?text=Haunted+Roots+1',
                    'https://via.placeholder.com/400x300/333/fff?text=Haunted+Roots+2',
                    'https://via.placeholder.com/400x300/333/fff?text=Haunted+Roots+3',
                    'https://via.placeholder.com/400x300/333/fff?text=Haunted+Roots+4',
                    'https://via.placeholder.com/400x300/333/fff?text=Haunted+Roots+5',
                    'https://via.placeholder.com/400x300/333/fff?text=Haunted+Roots+6',
                    'https://via.placeholder.com/400x300/333/fff?text=Haunted+Roots+7'
                ],
                'shadows-of-the-abyss': [
                    'https://via.placeholder.com/400x300/333/fff?text=Shadows+of+the+Abyss+1',
                    'https://via.placeholder.com/400x300/333/fff?text=Shadows+of+the+Abyss+2'
                ],
                'echoes-of-the-damned': [
                    'https://via.placeholder.com/400x300/333/fff?text=Echoes+of+the+Damned+1',
                    'https://via.placeholder.com/400x300/333/fff?text=Echoes+of+the+Damned+2'
                ],
                'reapers-harvest': [
                    'https://via.placeholder.com/400x300/333/fff?text=Reaper%27s+Harvest+1',
                    'https://via.placeholder.com/400x300/333/fff?text=Reaper%27s+Harvest+2'
                ]
            };

            const data = { images: projectImages[projectId] || [] };
            window.currentImages = data.images;

            data.images.forEach((src, index) => {
                const img = document.createElement('img');
                img.src = src;
                img.alt = projectId;
                img.className = 'gallery-image';
                img.addEventListener('click', () => {
                    openImageModal(index);
                });
                galleryContent.appendChild(img);
            });

            if (data.images.length === 0) {
                galleryContent.innerHTML = '<p>No gallery images available for this project.</p>';
            }
        }

        // Highlight active project icon in navbar
        function highlightActiveProject(projectId) {
            const icons = document.querySelectorAll('.gallery-nav-icon');
            icons.forEach(icon => {
                if (icon.dataset.projectId === projectId) {
                    icon.classList.add('active');
                } else {
                    icon.classList.remove('active');
                }
            });
        }

        // Back to portfolio button
        document.getElementById('back-to-portfolio').addEventListener('click', () => {
            window.location.href = 'index.html';
        });

        // Main
        const currentProjectId = getQueryParam('id');
        if (!currentProjectId) {
            document.body.innerHTML = '<p style="color: white; padding: 2rem;">No project specified. Please go back to the <a href="index.html">portfolio</a>.</p>';
        } else {
            loadProjects();
            highlightActiveProject(currentProjectId);
            loadGallery(currentProjectId);
        }
    </script>

    <script>
        // Modal for enlarged image with navigation
        function openImageModal(index) {
            // Create modal element
            const modal = document.createElement('div');
            modal.className = 'modal-window';

            // Create image element
            const img = document.createElement('img');
            img.src = window.currentImages[index];
            modal.appendChild(img);

            // Create controls
            const controls = document.createElement('div');
            controls.className = 'modal-controls';

            // Previous button
            const prevBtn = document.createElement('button');
            prevBtn.className = 'modal-button';
            prevBtn.textContent = 'Previous';
            prevBtn.addEventListener('click', () => {
                if (index > 0) {
                    modal.remove();
                    openImageModal(index - 1);
                }
            });
            if (index === 0) prevBtn.disabled = true;

            // Close button
            const closeBtn = document.createElement('button');
            closeBtn.className = 'modal-button';
            closeBtn.textContent = 'Close';
            closeBtn.addEventListener('click', () => {
                modal.remove();
            });

            // Next button
            const nextBtn = document.createElement('button');
            nextBtn.className = 'modal-button';
            nextBtn.textContent = 'Next';
            nextBtn.addEventListener('click', () => {
                if (index < window.currentImages.length - 1) {
                    modal.remove();
                    openImageModal(index + 1);
                }
            });
            if (index === window.currentImages.length - 1) nextBtn.disabled = true;

            controls.appendChild(prevBtn);
            controls.appendChild(closeBtn);
            controls.appendChild(nextBtn);
            modal.appendChild(controls);

            // Append modal to body
            document.body.appendChild(modal);
        }
    </script>
</body>
</html>
